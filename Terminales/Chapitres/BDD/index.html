<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Base de données - TAQ</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Base de donn\u00e9es";
        var mkdocs_page_input_path = "Terminales/Chapitres/BDD.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> TAQ
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Accueil</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Cours</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" >Secondes</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Secondes/Secondes/">Accueil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Secondes/exposes/">Exposés</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Secondes/Chapitres/Internet/">Internet</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Premières</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Premieres/Premieres/">Accueil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Premieres/Chapitres/Types_de_base_int/">Types de base (entiers)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Premieres/Chapitres/Types_de_base_float/">Types de base (flottants)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Premieres/Chapitres/Types_de_base_bool/">Types de base (booléens)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../Premieres/Chapitres/Types_de_base_str/">Types de base (chaînes de caractéres)</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Terminales</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../../Terminales/">Accueil</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../POO/">Programmation Orientée Objet</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Base de données</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#objectifs-du-chapitre">Objectifs du chapitre</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#le-modele-relationnel">Le modèle relationnel</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#problemes-redondance-et-anomalies">Problèmes : Redondance et anomalies</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#representation-le-schema-relationnel">Représentation : Le schéma relationnel</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#exercice-base-de-donnees-pour-une-bibliotheque">Exercice : Base de données pour une bibliothèque</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#enonce">Énoncé</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#enonce_1">Énoncé</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#le-systeme-de-gestion-de-bases-de-donnees-relationnelles-sgbdr">Le Système de Gestion de Bases de Données Relationnelles (SGBDR)</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#1-persistance-des-donnees">1. Persistance des données</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2-gestion-des-acces-concurrents">2. Gestion des accès concurrents</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#3-efficacite-du-traitement-des-requetes">3. Efficacité du traitement des requêtes</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#4-securisation-des-acces">4. Sécurisation des accès</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#5-bilan">5. Bilan</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sql">SQL</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#introduction_1">Introduction</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#les-composants-dune-requete-sql">Les composants d’une requête SQL</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#requetes-dinterrogation">Requêtes d’interrogation</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#exercices">Exercices</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#requetes-de-mise-a-jour">Requêtes de mise à jour</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">TAQ</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Cours</li>
          <li class="breadcrumb-item">Terminales</li>
      <li class="breadcrumb-item active">Base de données</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="bases-de-donnees">Bases de données</h1>
<h2 id="objectifs-du-chapitre">Objectifs du chapitre</h2>
<p>À la fin de ce cours, vous devez être capables de :<br />
- Comprendre le modèle relationnel (tables, attributs, clés).<br />
- Distinguer structure et contenu d’une base de données.<br />
- Manipuler une base de données via SQL (interrogation et mise à jour).<br />
- Connaître le rôle d’un SGBD (sécurité, efficacité, persistance).<br />
- Porter un regard critique sur l’usage des données (confidentialité, RGPD).  </p>
<hr />
<h2 id="introduction">Introduction</h2>
<p>Une <strong>donnée</strong> est une représentation élémentaire d'une information, 
exprimée sous une forme interprétable par un système informatique.</p>
<p>Une <strong>base de données</strong> est un outil permettant de stocker, organiser et manipuler de grandes quantités de données.<br />
Exemples :<br />
- Amazon → millions de commandes et utilisateurs.<br />
- Spotify → catalogues de musiques, playlists personnelles.<br />
- Un lycée → notes, emplois du temps, enseignants, salles.  </p>
<p>Les simples <strong>tableaux</strong> vus en Première ne suffisent plus : il faut un modèle plus robuste → <strong>le modèle relationnel</strong>.</p>
<hr />
<h2 id="le-modele-relationnel">Le modèle relationnel</h2>
<p>Une <strong>table</strong> est une structure qui permet de stocker des données dans une base de données relationnelle.
Elle est composée :<br />
- de colonnes (appelées <strong>attributs</strong>) qui décrivent la nature des données<br />
- de lignes (appelées tuples ou <strong>enregistrements</strong>) qui contiennent les valeurs concrètes  </p>
<p>Voici un exemple :
La table : Eleve
<img alt="table_eleve" src="../table_eleves.png" /></p>
<p>Chaque attribut est défini sur un domaine de valeurs.<br />
Le domaine n’est pas seulement le type de donnée (entier, texte, date), mais aussi parfois des contraintes supplémentaires (ex. : âge ≥ 0, email respectant un format particulier, etc).</p>
<p>Pour identifier de manière unique chaque ligne (chaque enregistrement) d’une table, on utilisera ce qu'on appelle une <strong>clé primaire</strong> qui peut être un attribut ou un ensemble d’attributs.</p>
<ul>
<li>Elle doit être unique : deux lignes ne peuvent pas avoir la même valeur de clé primaire.</li>
<li>Elle doit être non nulle (NOT NULL).</li>
<li>Elle ne doit pas changer dans le temps (stabilité).</li>
</ul>
<p><span style="color:blue">Exercices</span> : Determiner la clé primaire ainsi que les domaines et contraintes des attributs de la classe Eleve.</p>
<p>Très souvent, la clé primaire est constituée d’un unique attribut défini comme un identifiant numérique unique et auto-incrémenté, garantissant l’unicité et la stabilité des enregistrements.</p>
<h3 id="problemes-redondance-et-anomalies">Problèmes : Redondance et anomalies</h3>
<ul>
<li>
<p>Professeurs répétés :<br />
Le professeur principal de la classe 1A (M. Beline) apparaît plusieurs fois (Alice et Cédric).<br />
Si le professeur principal devait changer, il faudrait alors le corriger partout, sinon incohérence.  </p>
</li>
<li>
<p>Années liées aux classes :<br />
L’"Année" est implicitement liée à la "Classe". On stocke plusieur fois la même information : la 1A est une classe de première.</p>
</li>
</ul>
<p><strong>Les anomalies :</strong><br />
- d'<strong>insertion</strong> : si on veut enregistrer une classe qui n'a pas encore d'élève, on ne peut pas<br />
- de <strong>mise à jour</strong> : si un professeur change de nom, il faut le modifier partout dans la base sinon incohérence<br />
- de <strong>suppression</strong> : Si on supprime tous les élèves de la classe 1A, on perd toute les informations sur cette dernière  </p>
<p>Afin d’éviter les redondances et les anomalies, on sépare les informations dans plusieurs tables reliées entre elles par des clés étrangères.<br />
Une <strong>clé étrangère</strong> est un attribut (ou un ensemble d’attributs) d’une table qui fait référence à la <strong>clé primaire d’une autre table</strong>.<br />
Elle permet de <strong>lier deux tables entre elles</strong> et d’assurer la cohérence des données.  </p>
<p>Dans notre exemple, il est pertinent d'utiliser deux classes : Eleve et Classe.
<img alt="tables" src="../tables_eleves.png" /></p>
<h3 id="representation-le-schema-relationnel">Représentation : Le schéma relationnel</h3>
<p>Le <strong>schéma relationnel</strong> décrit la <strong>structure d’une base de données</strong> relationnelle de manière formelle.<br />
Il précise pour chaque table :<br />
- Le <strong>nom de la table</strong>.<br />
- Les <strong>attributs</strong> (colonnes) avec leur domaine de valeurs et leurs contraintes (type, non null, valeurs autorisées).<br />
- La <strong>clé primaire</strong>, qui identifie de manière unique chaque enregistrement.<br />
- Les <strong>clés étrangères</strong>, qui établissent les liens avec d’autres tables.  </p>
<p>Le schéma relationnel est indépendant des données réelles (contenu).<br />
Il sert de <strong>plan directeur</strong> pour construire, maintenir et interroger la base de données tout en garantissant l’intégrité des informations et en évitant les redondances.  </p>
<p>Exemple simple : 
<img alt="Schema" src="../schema_relationnel.png" /></p>
<p>Le symbole <code>#</code> sert à identifier les clés primaires, les attributs soulignés sont les clés étrangères référencant la clé primaire pointée par la flèche.</p>
<p>Grâce à ce schéma, on sait <strong>quelles tables existent</strong>, <strong>comment elles sont reliées</strong>.</p>
<hr />
<h2 id="exercice-base-de-donnees-pour-une-bibliotheque">Exercice : Base de données pour une bibliothèque</h2>
<h3 id="enonce">Énoncé</h3>
<p>Vous devez concevoir une base de données pour gérer les informations suivantes :  </p>
<p>Imaginez que vous travaillez dans une bibliothèque. Votre mission est de créer un système permettant de suivre toutes les informations importantes pour gérer les livres et leurs emprunts.  </p>
<p>Chaque livre possède des caractéristiques comme le titre, l’auteur et la date de publication. Pour ne pas confondre deux livres identiques, chaque exemplaire dispose d’un ISBN. Les clients qui fréquentent la bibliothèque ont chacune un prénom, un nom, une date de naissance et une adresse mail. On doit pouvoir distinguer facilement chaque lecteur. Enfin, la bibliothèque souhaite suivre les emprunts : pour chaque livre prêté, on connaît la date à laquelle il a été emprunté, la date prévue de retour, le livre concerné et la personne qui l’a emprunté.  </p>
<p>À partir de ce scénario, réfléchissez à la meilleure façon d’organiser ces informations pour éviter les répétitions et faciliter les recherches.</p>
<p><strong>Consignes :</strong></p>
<ol>
<li>Identifiez les <strong>tables</strong> nécessaires.  </li>
<li>Pour chaque table, indiquez les <strong>attributs</strong>, leur <strong>domaine de valeurs</strong> et les <strong>contraintes</strong>.  </li>
<li>Déterminez la <strong>clé primaire</strong> pour chaque table.  </li>
<li>Identifiez les <strong>clés étrangères</strong> pour relier les tables entre elles.  </li>
<li>Dessinez le <strong>schéma relationnel</strong> correspondant.</li>
</ol>
<h3 id="enonce_1">Énoncé</h3>
<p>Vous devez concevoir une base de données pour gérer les informations d’un garage automobile.<br />
Votre mission est de créer un système permettant de suivre toutes les informations nécessaires sur les véhicules, les clients et les réparations effectuées.  </p>
<p>Chaque véhicule possède une immatriculation, un propriètaire, une marque, un modèle et une année de fabrication.<br />
Chaque client a un prénom, un nom, une adresse et un numéro de téléphone.<br />
Enfin, le garage souhaite suivre les réparations : pour chaque intervention, on doit enregistrer la date, la description des travaux réalisés, le véhicule concerné et le mécanicien responsable.<br />
Les mécaniciens sont identifiés par un matricule et ont un nom ainsi qu’une spécialité (moteur, carrosserie, électronique…).  </p>
<p>À partir de ce scénario, réfléchissez à la meilleure façon d’organiser ces informations pour éviter les répétitions et faciliter les recherches.</p>
<hr />
<p><strong>Consignes :</strong></p>
<ol>
<li>Identifiez les <strong>tables</strong> nécessaires.  </li>
<li>Pour chaque table, indiquez les <strong>attributs</strong>, leur <strong>domaine de valeurs</strong> et les <strong>contraintes</strong>.  </li>
<li>Déterminez la <strong>clé primaire</strong> pour chaque table.  </li>
<li>Identifiez les <strong>clés étrangères</strong> pour relier les tables entre elles.  </li>
<li>Dessinez le <strong>schéma relationnel</strong> correspondant.</li>
</ol>
<hr />
<h2 id="le-systeme-de-gestion-de-bases-de-donnees-relationnelles-sgbdr">Le Système de Gestion de Bases de Données Relationnelles (SGBDR)</h2>
<p>Jusqu’ici, nous avons étudié le <strong>modèle relationnel</strong> : tables, clés primaires, clés étrangères, schéma relationnel.<br />
Mais pour exploiter concrètement ces concepts, il faut un logiciel capable de <strong>créer, gérer et interroger</strong> des bases de données : c’est le rôle d’un <strong>Système de Gestion de Bases de Données Relationnelles (SGBDR)</strong>.</p>
<p>Un SGBDR (comme MySQL, PostgreSQL, SQLite, Oracle, SQL Server) rend plusieurs <strong>services essentiels</strong> :  </p>
<hr />
<h3 id="1-persistance-des-donnees">1. Persistance des données</h3>
<p>Un SGBDR assure que les données sont <strong>stockées durablement</strong> sur un support non volatil (disque, SSD).<br />
Contrairement aux simples structures en mémoire (listes, tableaux), les données sont conservées même après l’arrêt ou la panne du système.<br />
Exemple : les commandes d’Amazon ou les playlists Spotify ne disparaissent pas quand on éteint son ordinateur.</p>
<h3 id="2-gestion-des-acces-concurrents">2. Gestion des accès concurrents</h3>
<p>Plusieurs utilisateurs ou programmes peuvent accéder à la base <strong>en même temps</strong>.<br />
Le SGBDR garantit que les données restent <strong>cohérentes</strong>, même si deux personnes modifient simultanément la même information.<br />
Exemple : deux employés de banque qui consultent et modifient le solde d’un compte en parallèle.</p>
<h3 id="3-efficacite-du-traitement-des-requetes">3. Efficacité du traitement des requêtes</h3>
<p>Le SGBDR optimise automatiquement l’exécution des requêtes SQL (sélection, jointures, filtrages) grâce à des mécanismes comme les <strong>index</strong>.<br />
L’utilisateur n’a pas besoin de savoir <em>comment</em> les données sont stockées physiquement : le système se charge d’obtenir la réponse <strong>rapidement et efficacement</strong>.<br />
Exemple : retrouver un client précis parmi des millions d’enregistrements en une fraction de seconde.</p>
<h3 id="4-securisation-des-acces">4. Sécurisation des accès</h3>
<p>Le SGBDR contrôle <strong>qui a le droit</strong> de lire, modifier ou supprimer certaines données.<br />
- Gestion des comptes utilisateurs.<br />
- Attribution de <strong>privilèges</strong> (ex. : un élève peut consulter ses notes, mais pas celles des autres).<br />
- Protection contre les accès non autorisés.<br />
Exemple : dans une base de données d’un hôpital, seuls les médecins ont accès aux dossiers médicaux des patients.</p>
<h3 id="5-bilan">5. Bilan</h3>
<p>Le SGBDR n’est pas seulement un outil de stockage :<br />
- Il garantit la <strong>durabilité</strong> des données.<br />
- Il gère les <strong>conflits d’accès simultanés</strong>.<br />
- Il optimise l’<strong>efficacité des recherches</strong>.<br />
- Il sécurise l’<strong>accès aux informations sensibles</strong>.  </p>
<p>Ces services sont indispensables pour comprendre pourquoi les bases de données relationnelles sont utilisées partout dans le monde numérique.</p>
<h2 id="sql">SQL</h2>
<h3 id="introduction_1">Introduction</h3>
<p>Le langage <strong>SQL</strong> (Structured Query Language) permet d’interroger et de modifier des bases de données relationnelles.<br />
Nous allons voir les principales instructions pour <strong>sélectionner</strong>, <strong>ajouter</strong>, <strong>modifier</strong> ou <strong>supprimer</strong> des données.</p>
<p>Pour illustrer les exemples, on utilisera la base suivante :</p>
<p><strong>Table <code>Eleve</code></strong>  </p>
<table>
<thead>
<tr>
<th>id_eleve</th>
<th>nom</th>
<th>prenom</th>
<th>classe</th>
<th>age</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Martin</td>
<td>Alice</td>
<td>TNSI</td>
<td>17</td>
</tr>
<tr>
<td>2</td>
<td>Dupont</td>
<td>Lucas</td>
<td>TNSI</td>
<td>18</td>
</tr>
<tr>
<td>3</td>
<td>Durand</td>
<td>Emma</td>
<td>TES</td>
<td>17</td>
</tr>
<tr>
<td>4</td>
<td>Bernard</td>
<td>Hugo</td>
<td>TNSI</td>
<td>18</td>
</tr>
</tbody>
</table>
<p><strong>Table <code>Note</code></strong></p>
<table>
<thead>
<tr>
<th>id_note</th>
<th>id_eleve</th>
<th>matiere</th>
<th>valeur</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>NSI</td>
<td>15</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>NSI</td>
<td>12</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>Maths</td>
<td>14</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>NSI</td>
<td>17</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="les-composants-dune-requete-sql">Les composants d’une requête SQL</h3>
<p>Une requête SQL est composée de plusieurs parties :<br />
- <strong>SELECT</strong> : les colonnes à afficher<br />
- <strong>FROM</strong> : les tables utilisées<br />
- <strong>WHERE</strong> : condition(s) de filtrage (optionnel)<br />
- <strong>JOIN</strong> : pour relier plusieurs tables (optionnel)  </p>
<hr />
<h3 id="requetes-dinterrogation">Requêtes d’interrogation</h3>
<p><strong>Afficher toutes les colonnes</strong></p>
<pre><code class="language-sql">SELECT * 
FROM Eleve;
</code></pre>
<p>Affiche toutes les informations de la table <code>Eleve</code>.</p>
<hr />
<p><strong>Sélectionner certaines colonnes</strong></p>
<pre><code class="language-sql">SELECT nom, prenom
FROM Eleve;
</code></pre>
<p>Affiche uniquement le nom et le prénom des élèves.</p>
<hr />
<p><strong>Supprimer les doublons avec DISTINCT</strong></p>
<pre><code class="language-sql">SELECT DISTINCT classe
FROM Eleve;
</code></pre>
<p>Affiche la liste des classes sans répétition (<code>TNSI</code>, <code>TES</code>).</p>
<hr />
<p><strong>Filtrer avec WHERE</strong></p>
<pre><code class="language-sql">SELECT nom, prenom 
FROM Eleve
WHERE age = 18;
</code></pre>
<p>Affiche les élèves ayant 18 ans.</p>
<hr />
<p><strong>Trier les résultats avec ORDER BY</strong></p>
<pre><code class="language-sql">SELECT nom, prenom, age
FROM Eleve
ORDER BY age DESC;
</code></pre>
<p>Classe les élèves par âge décroissant.</p>
<hr />
<p><strong>Utiliser les fonctions d’agrégation</strong>
- <strong>AVG()</strong> : moyenne<br />
- <strong>MIN()</strong> / <strong>MAX()</strong> : minimum, maximum<br />
- <strong>COUNT()</strong> : compter le nombre de valeurs<br />
- <strong>SUM()</strong> : somme</p>
<p>Exemple :  </p>
<pre><code class="language-sql">SELECT AVG(valeur) 
FROM Note
WHERE matiere = 'NSI';
</code></pre>
<p>Moyenne des notes en NSI.</p>
<hr />
<p><strong>Requêtes imbriquées (sous-requêtes)</strong></p>
<p>Une <strong>requête imbriquée</strong> (ou <em>sous-requête</em>) est une requête SQL placée <strong>à l’intérieur</strong> d’une autre requête.<br />
Elle permet de filtrer ou de calculer des résultats intermédiaires.</p>
<p>Exemples :</p>
<pre><code class="language-sql">SELECT nom, prenom
FROM Eleve
WHERE id_eleve IN (
    SELECT id_eleve
    FROM Note
    WHERE valeur &gt; 15
);

SELECT nom, prenom
FROM Eleve
WHERE age = (
    SELECT MAX(age)
    FROM Eleve
);

SELECT nom, prenom,
       (SELECT AVG(valeur)
        FROM Note
        WHERE Note.id_eleve = Eleve.id_eleve) AS moyenne
FROM Eleve;

SELECT nom, prenom
FROM Eleve E
WHERE age &gt; (
    SELECT AVG(age)
    FROM Eleve
    WHERE classe = E.classe
);

</code></pre>
<hr />
<h3 id="exercices">Exercices</h3>
<p>Voici un base de données repertoriant les 151 premiers pokemons :<br />
<a href="../pokemon151.sqbpro">💾 Télécharger pokemon.db</a></p>
<table>
<thead>
<tr>
<th>pokemon</th>
</tr>
</thead>
<tbody>
<tr>
<td># numero   (int)</td>
</tr>
<tr>
<td>nom    (text)</td>
</tr>
<tr>
<td>type1  (text)</td>
</tr>
<tr>
<td>type2  (text)</td>
</tr>
<tr>
<td>taille (float)</td>
</tr>
<tr>
<td>poids  (float)</td>
</tr>
<tr>
<td><u>evolution</u>   (int)</td>
</tr>
</tbody>
</table>
<p>L'attribut <code>evolution</code> est une clé étrangère qui référence l'attribut <code>numero</code>.</p>
<p>Voici les différents types qui existent :</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Plante</td>
<td>Feu</td>
<td>Eau</td>
<td>Insecte</td>
<td>Normal</td>
</tr>
<tr>
<td>Poison</td>
<td>Électrik</td>
<td>Sol</td>
<td>Fée</td>
<td>Combat</td>
</tr>
<tr>
<td>Psy</td>
<td>Roche</td>
<td>Spectre</td>
<td>Glace</td>
<td>null</td>
</tr>
</tbody>
</table>
<p>Chaque pokemon a obligatoirement un <code>type1</code>, mais <code>type2</code> peut être égal à <code>null</code>.</p>
<p>Pour vérifier qu'un élément est null on utilisera le mot clé <code>is</code> (exemple : evolution is null).</p>
<p><strong>Requêtes</strong></p>
<p>écrire en les requêtes SQL suivantes :</p>
<ol>
<li>Afficher tous la table <code>pokemon</code></li>
<li>Afficher tous les <code>noms</code> et <code>numéro</code> des pokemons</li>
<li>Afficher toutes les combinaisons de <code>types</code> présentes dans la table</li>
<li>Problème : on a beaucoup de fois la même combinaison : afficher toutes les combinaisons différentes</li>
<li>Afficher tous les pokemons de type <code>Eau</code> qui en sont à leur premier stade d'évolution (c'est à dire que l'attribut <code>evolution</code> est à <code>null</code>)</li>
<li>Afficher les pokemons du plus grand au plus petit</li>
<li>Afficher les pokemons dans l'ordre alphabetique inverse</li>
<li>Afficher la <code>taille</code> moyenne des pokemons de type <code>Insecte</code></li>
<li>Afficher le plus petit des pokemons ainsi que le plus gros</li>
<li>Afficher le nombre de pokemon de type <code>Spectre</code></li>
<li>Afficher la somme des poids des pokemons de type <code>Feu</code> dont la <code>taille</code> dépasse le mètre</li>
<li>Afficher les Pokémon dont le deuxième type est <code>Poison</code> et dont la <code>taille</code> est supérieure à 1 mètre</li>
<li>Afficher les Pokémon dont le <code>poids</code> est supérieur à la moyenne du <code>poids</code> de tous les Pokémon</li>
<li>Afficher le <code>nom</code> et le <code>type</code> des Pokémon dont la <code>taille</code> est comprise entre 1 mètre et 2 mètres, triés par <code>taille</code> décroissante</li>
<li>Afficher les Pokémon dont la somme des <code>tailles</code> et des <code>poids</code> est supérieure à 50</li>
</ol>
<hr />
<p><strong>Relier plusieurs tables avec JOIN</strong></p>
<pre><code class="language-sql">SELECT Eleve.nom, Eleve.prenom, Note.matiere, Note.valeur
FROM Eleve
JOIN Note ON Eleve.id_eleve = Note.id_eleve;
</code></pre>
<p>Affiche le nom, le prénom et les notes des élèves.</p>
<p><strong>Alias avec AS et auto-jointures</strong></p>
<ul>
<li><code>AS</code> permet de donner un <strong>nom temporaire</strong> à une colonne ou une table.  </li>
<li>Utile pour simplifier les requêtes et faire des jointures sur soi-même.  </li>
</ul>
<p>Exemple d’<strong>auto-jointure</strong> : trouver les paires d’élèves d’une même classe.  </p>
<pre><code class="language-sql">SELECT E1.nom AS Eleve1, E2.nom AS Eleve2
FROM Eleve AS E1
JOIN Eleve AS E2 ON E1.classe = E2.classe
WHERE E1.id_eleve &lt; E2.id_eleve;
</code></pre>
<p><strong>Exercice</strong></p>
<p>écrire en les requêtes SQL suivantes :</p>
<ol>
<li>Afficher le <code>nom</code> de chaque Pokémon ainsi que le <code>nom</code> de son <code>evolution</code> (si elle existe) en utilisant une auto-jointure sur la colonne <code>evolution</code>.</li>
<li>Afficher tous les Pokémon dont le <code>type1</code> est le même que celui de leur <code>evolution</code>.</li>
<li>Afficher le <code>nom</code> des Pokémon et les <code>types</code> de leur <code>evolution</code> lorsque le <code>type1</code> principal diffère.</li>
<li>Afficher le <code>nom</code> et le <code>type</code> des Pokémon dont le type principal diffère de celui de l’evolution mais qui partagent le même type secondaire.</li>
<li>Afficher les Pokémon et le <code>nom</code> de leur <code>evolution</code> uniquement si le <code>taille</code> de l’évolution est inférieur à celui du Pokémon initial.</li>
</ol>
<hr />
<h3 id="requetes-de-mise-a-jour">Requêtes de mise à jour</h3>
<p><strong>Ajouter une donnée (INSERT)</strong></p>
<pre><code class="language-sql">INSERT INTO Eleve (id_eleve, nom, prenom, classe, age)
VALUES (5, 'Lemoine', 'Clara', 'TES', 17);
</code></pre>
<p>Ajoute une nouvelle élève.</p>
<hr />
<p><strong>Modifier une donnée (UPDATE)</strong></p>
<pre><code class="language-sql">UPDATE Eleve
SET age = 19
WHERE nom = 'Dupont' AND prenom = 'Lucas';
</code></pre>
<p>Met à jour l’âge de Lucas Dupont.</p>
<hr />
<p><strong>Supprimer une donnée (DELETE)</strong></p>
<pre><code class="language-sql">DELETE FROM Eleve
WHERE id_eleve = 4;
</code></pre>
<p>Supprime Hugo Bernard de la base.</p>
<p><strong>Exercice</strong></p>
<p>écrire en les requêtes SQL suivantes (pour chacune d'entre elle, vérifier que les mises à jour ont bien étées effectuées avec des requêtes d'interrogation):</p>
<ol>
<li>Ajouter les pokémons que vous voulez dans la table. Vous pouvez chercher les infos sur internet ou bien en inventer.</li>
<li>Modifier ces données</li>
<li>Afficher le nombre de pokémon de type <code>Eau</code>. Ensuite supprimer tous les pokémons de type <code>Eau</code> de la table. (Il y en a vraiment trop)</li>
</ol>
<hr />
<p><a href="https://www.lyceum.fr/tg/nsi/2-bases-de-donnees/3-langage-sql/exo/">Exercice type bac</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../POO/" class="btn btn-neutral float-left" title="Programmation Orientée Objet"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../POO/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
